<div class="year-toggle-buttons">
    
        {% for year in years %}
        <div class="form-check form-check-inline">
            <input class="form-check-input year-checkbox" type="checkbox" id="year-{{ year }}" value="{{ year }}">
            <label class="form-check-label" for="year-{{ year }}">{{ year }}</label>
        </div>
        {% endfor %}    
    
    
</div>

<script>
    // Plotly empty figure initialization
    const emptyFigure = {
        data: [], // No data initially
        layout: {
            title: 'Select a Year to Display Data',
            xaxis: { title: 'X-axis' },
            yaxis: { title: 'Y-axis' },
        }
    };

    // Render the empty plot when the page loads
    document.addEventListener('DOMContentLoaded', () => {
        Plotly.newPlot('plotly-div', emptyFigure.data, emptyFigure.layout);
    });

    // Year toggle logic (your existing code here)
    document.querySelectorAll('.year-checkbox').forEach(checkbox => {
        checkbox.addEventListener('change', () => {
            const selectedYears = Array.from(document.querySelectorAll('.year-checkbox:checked'))
                .map(checkbox => checkbox.value);

            // Prepare the request
            fetch('http://localhost:8000/dashboard/get-hatch-chart/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ years: selectedYears })
            })
            .then(response => response.json())
            .then(data => {
                Plotly.react('plotly-div', data.data, data.layout);
            })
            .catch(error => console.error('Error:', error));
        });
    });
</script>

